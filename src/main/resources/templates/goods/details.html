<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="layout/basic" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

	<th:block layout:fragment="add-resource">
		<!--/* slick */-->
		<link rel="stylesheet" type="text/css" th:href="@{/user/jquery/slick/slick.css}"/>
		<script type="text/javascript" th:src="@{/user/jquery/slick/slick.min.js}"></script>
	</th:block>

	<th:block layout:fragment="content">
		<div id="container">
			<div class="clear">
				<div class="inner view fl_wrap">
					<!-- slide -->
					<div class="slide_wrap">
						<div class="slide">
							<!--/* ì˜¤ë¸Œì íŠ¸ ë‹¤ìŒì— status(ë³€ìˆ˜)ë¥¼ ì§€ì •í•  ìˆ˜ ìˆê³ , ì§€ì •í•˜ì§€ ì•Šì€ ê²½ìš° imageStat.index, size, count, even, odd, first, lastì™€ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ */-->
							<div class="" th:if="${not #arrays.isEmpty(images)}" th:each="image, status : ${images}">
								<div class="img_wrap">
									<span class="img_box">
										<img th:src="@{/goods/images/} + ${#temporals.format( image.insertTime, 'yy-MM-dd' )} + '/' + ${image.storedName}" th:alt="shoes + ${status.index}" />
									</span>
								</div>
							</div>
						</div>
						<div class="slide_pager">
							<div class="" th:if="${not #arrays.isEmpty(images)}" th:each="image, status : ${images}">
								<img th:src="@{/goods/images/} + ${#temporals.format( image.insertTime, 'yy-MM-dd' )} + '/' + ${image.storedName}" th:alt="shoes + ${status.index}" />
							</div>
						</div>
						<script>
							$(document).ready(function () {
								$('.slide').slick({
									autoplay: false,
									autoplaySpeed: 1500,
									slidesToShow: 1,
									slidesToScroll: 1,
									arrows: false,
									fade: true,
									asNavFor: '.slide_pager'
								});
								$('.slide_pager').slick({
									slidesToShow: 6,
									slidesToScroll: 1,
									asNavFor: '.slide',
									dots: false,
									arrows: false,
									focusOnSelect: true
								});
							});
						</script>
					</div>
					<!-- //slide -->

					<!-- ìƒì„¸ì •ë³´ -->
					<div class="pd_info_wrap">
						<form th:action="@{/goods/purchase}" th:object="${goods}" method="post" onsubmit="return validationOfForm(this)">
							<!-- ìƒì„¸ ì´ë¦„, ê°€ê²©, ë³„ì  -->
							<div class="pd_title_wrap">
								<h1 th:text="${goods.name}" class="pd_title">ìƒí’ˆëª…</h1>
								<del th:text="${#numbers.formatInteger( goods.price, 3, 'COMMA' )}" style="font-size: 17px;"></del>
								<p th:if="${status == T(com.dy.common.Const.Status).D}" th:text="${#numbers.formatInteger( goods.price, 3, 'COMMA' )}" class="pd_price"></p>
								<p th:unless="${status == T(com.dy.common.Const.Status).D}" th:text="${#numbers.formatInteger(T(Math).floor(((goods.price * (1 - goods.rate / 100.0)) / 10.0)) * 10.0, 3, 'COMMA')}" class="pd_price"></p>
								<div class="pd_review">
									<span th:class="|ic_star ic_star${reviewAverage}|"></span>
								</div> 
							</div>
							<!-- //ìƒì„¸ ì´ë¦„, ê°€ê²© -->
			
							<!-- ìƒì„¸ ì˜µì…˜ -->
							<div class="pd_option_wrap">
								<div class="pd_option option_color">
									<h2 class="tit">
										ìƒ‰ìƒ
										<span th:text="${goods.stock.color}"></span>
									</h2>
								</div>

								<div class="pd_option option_size">
									<h2 class="tit">ì‚¬ì´ì¦ˆ</h2>
									<div class="cont">
										<label class="radio_size" th:if="${not #arrays.isEmpty( options )}" th:each="size : ${options.keySet()}" th:for="size + ${size}" th:classappend="${#strings.equals( options.get(size), '0' )} ? 'soldout'">
											<input type="radio" name="size" th:id="size + ${size}" th:value="${size}" th:attr="data-actual-quantity=${options.get(size)}" th:disabled="${#strings.equals( options.get(size), '0' )}" />
											<span th:text="${size}">ì‚¬ì´ì¦ˆ</span>
										</label>
									</div>
								</div>

								<div class="pd_option option_quantity">
									<h2 class="tit">ìˆ˜ëŸ‰</h2>
									<div class="cont">
										<input type="text" id="quantity" name="quantity" value="1" maxlength="2" onfocusout="checkQuantity(this)" />
										<button type="button" class="btn_plus" onclick="addQuantity(document.getElementById('quantity'))">+</button>
										<button type="button" class="btn_minus" onclick="reduceQuantity(document.getElementById('quantity'))">-</button>
									</div>
								</div>
							</div>
							<!-- //ìƒì„¸ ì˜µì…˜ -->

							<div class="btn_wrap">
								<a th:if="${favoriteStatus == 1}" href="javascript:void(0)" class="btn btn_border_black active" onclick="changeFavoriteStatus(this)" th:text="|ğŸ’—  ${favoriteTotalCount}|"></a>
								<a th:unless="${favoriteStatus == 1}" href="javascript:void(0)" class="btn btn_border_black" onclick="favorite(this)" th:text="|ğŸ’—  ${favoriteTotalCount}|"></a>
								<a href="javascript:void(0)" class="btn btn_black" th:onclick="addToCart([[ *{code} ]])">ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°</a>
								<!--/* TODO => ë°”ë¡œ êµ¬ë§¤ ì²˜ë¦¬í•˜ê¸° */-->
								<!--/* <a href="javascript: void(0)" class="btn btn_orange" th:onclick="goPurchase([[ *{code} ]])">ë°”ë¡œ êµ¬ë§¤</a> */-->
							</div>
						</form>
					</div>
					<!-- //ìƒì„¸ì •ë³´ -->
		
					
					<!-- ìƒì„¸ì„¤ëª… -->
					<div class="pd_detail_wrap clear tab_wrap">
						<div class="pd_detail_tab text_center">
							<a href="javascript:void(0)" onclick="tabFunc(this, '#pdDetail');" class="active">ìƒí’ˆ ì„¤ëª…</a>
							<a href="javascript:void(0)" onclick="tabFunc(this, '#pdDelivery');">ë°°ì†¡/ë°˜í’ˆ ì•ˆë‚´</a>
							<a href="javascript:void(0)" onclick="tabFunc(this, '#pdReview');">ìƒí’ˆ ë¦¬ë·°</a>
						</div>
						<div id="pdDetail" class="pd_detail text_center tab_cont" style="display: block;">
							<img th:src="@{/user/images/common/detail.jpg}" alt="" />
						</div>

						<div id="pdDelivery" class="pd_delivery tab_cont">
							<dl>
								<dt>ë°°ì†¡ì‚¬</dt>
								<dd>ìš°ì²´êµ­íƒë°° (ìƒí’ˆ ì¤€ë¹„ ê¸°ê°„ì´ ì†Œìš” ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.)</dd>
								<dt>ë°°ì†¡ ì•ˆë‚´</dt>
								<dd>- 3ë§Œì› ì´ìƒì€ ë¬´ë£Œë°°ì†¡ì…ë‹ˆë‹¤.</dd>
								<dd>- 3ë§Œì› ë¯¸ë§Œ êµ¬ë§¤ì‹œ 2,500ì›ì´ ë¶€ê³¼ ë©ë‹ˆë‹¤. ë„ì„œì‚°ê°„ì§€ì—­ì€ ì¶”ê°€ë¹„ìš©ê³¼ ë°°ì†¡ê¸°ê°„ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</dd>
								<dd>- ì£¼ë¬¸í•œ ìƒí’ˆì€ ì˜ì—…ì¼ 3ì¼(ê³µíœ´ì¼/ì£¼ë§ ì œì™¸) ì´ë‚´ì— ë°›ì•„ë³´ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìƒí’ˆì¤€ë¹„ì— ì—ëŸ¬ì‚¬í•­ì´ ìˆê±°ë‚˜, ë°œì†¡ì§€ì—°ì´ ë¶ˆê°€í”¼í•  ê²½ìš° ê³ ê°ë‹˜ê»˜ ì•ˆë‚´ ì—°ë½ì„ ë“œë¦½ë‹ˆë‹¤.</dd>
								<dt>ë°˜ì†¡ì‹œ íƒë°°íšŒì‚¬</dt>
								<dd>ìš°ì²´êµ­íƒë°° (ì§€ì •ëœ íƒë°° ì´ì™¸ì˜ íƒ€ íƒë°°ì‚¬ ì´ìš©ì‹œ ì¶”ê°€ë˜ëŠ” ë¹„ìš©ì€ ê³ ê°ë‹˜ê»˜ì„œ ë¶€ë‹´í•˜ì…”ì•¼ í•©ë‹ˆë‹¤.)</dd>
								<dd>[ ë°˜ì†¡ì§€ ì£¼ì†Œ ì¸ì²œê´‘ì—­ì‹œ ë¶€í‰êµ¬ ì‚°ê³¡ë™ ]</dd>
								<dt>ë°˜í’ˆ ì •ë³´</dt>
								<dd>- ìƒí’ˆì´ ì´ë¯¸ ì¶œê³  ë˜ì—ˆì„ ë•Œ ìˆ˜ì·¨ ê±°ë¶€ê°€ ë¶ˆê°€í•©ë‹ˆë‹¤.</dd>
								<dd>- ë°˜í’ˆì€ ìƒí’ˆ ìˆ˜ë ¹ì¼ë¡œë¶€í„° 7ì¼ ì´ë‚´ì— ë°˜í’ˆì ‘ìˆ˜ë¥¼ í•˜ì…”ì•¼ í•˜ë©°, ì ‘ìˆ˜ í›„ (ì—…ë¬´ì¼) 3ì¼ì´ë‚´ì— ë³¸ì‚¬ ë°˜ì†¡ì§€ì— ë„ì°©í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.</dd>
								<dd>- ë°˜í’ˆì‹œ, ë„ì˜ ì˜¨ë¼ì¸ëª°ì—ì„œ ê¼­ ë°˜í’ˆì ‘ìˆ˜ë¥¼ í•˜ì‹  í›„ ì§„í–‰í•˜ì…”ì•¼ í•©ë‹ˆë‹¤.</dd>
								<dd>- AS ë¬¸ì˜ëŠ” ê³ ê°ì„¼í„°ì— ë¬¸ì˜ë¥¼ í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.</dd>
								<dd>- ìƒí’ˆí¬ì¥ì´ í›¼ì†ë˜ê±°ë‚˜ ìƒí’ˆê°€ì¹˜ê°€ ìƒì‹¤ëœ ê²½ìš° ë°˜í’ˆì´ ë¶ˆê°€í•©ë‹ˆë‹¤.</dd>
								<dt>ë°˜í’ˆ ë°°ì†¡ë¹„</dt>
								<dd>- ê³ ê°ë‹¨ìˆœë³€ì‹¬ ì‹œ, ë°°ì†¡ë¹„ëŠ” ê³ ê° ë¶€ë‹´ì…ë‹ˆë‹¤.</dd>
								<dd>- ìƒí’ˆë¶ˆëŸ‰ ë° ì˜¤ë°°ì†¡ ì‹œ, ë°°ì†¡ë¹„ëŠ” íŒë§¤ì ë¶€ë‹´ì…ë‹ˆë‹¤.</dd>
								<dd>- ì£¼ë¬¸ì‹œ ë¬´ë£Œë°°ì†¡ìœ¼ë¡œ ìˆ˜ë ¹í•˜ì‹  ê²½ìš°, ê³ ê°ë‹¨ìˆœ ë³€ì‹¬ì‹œ ìµœì´ˆ ë°°ì†¡ë¹„ê°€ í¬í•¨ ë¶€ê³¼ë©ë‹ˆë‹¤.</dd>
								<dd>- ê°œë³„ ë°˜ì†¡ ì‹œ, ì¶”ê°€ì ìœ¼ë¡œ ë°œìƒí•˜ëŠ” ë¹„ìš©ì€ ê³ ê° ë¶€ë‹´ì…ë‹ˆë‹¤.</dd>
								<dt>ë°˜í’ˆë¶ˆê°€ ê²½ìš°</dt>
								<dd>- ë°˜í’ˆìš”ì²­ ê¸°ê°„(7ì¼)ì´ ì§€ë‚œ ê²½ìš°</dd>
								<dd>- í¬ì¥ì„ ê°œë´‰í•˜ì˜€ê±°ë‚˜ í¬ì¥ì´ í›¼ì†ë˜ì–´(ìƒí’ˆì˜ Tagë¶„ë¦¬/ë¶„ì‹¤, ë¹„ë‹í¬ì¥ í›¼ì†, ì‹ ë°œë°•ìŠ¤ í›¼ì† ë“±) ìƒí’ˆê°€ì¹˜ê°€ í˜„ì €íˆ ê°ì†Œí•œ ê²½ìš°</dd>
								<dd>- ì•…ì„¸ì„œë¦¬ ê³ ìœ ì˜ í¬ì¥ì„ ê°œë´‰ í•˜ì˜€ìœ¼ë‚˜ ë‹¨ìˆœ ë³€ì‹¬ìœ¼ë¡œ êµí™˜, ë°˜í’ˆ ì›í•˜ëŠ” ê²½ìš°</dd>
								<dd>- êµ¬ë§¤ìì˜ ì±…ì„ìˆëŠ” ì‚¬ìœ ë¡œ ìƒí’ˆ ë“±ì´ ë©¸ì‹¤ ë˜ëŠ” í›¼ì†ëœ ê²½ìš°</dd>
								<dd>- êµ¬ë§¤ìì˜ ì‚¬ìš© ë˜ëŠ” ì¼ë¶€ ì†Œë¹„ì— ì˜í•˜ì—¬ ìƒí’ˆê°€ì¹˜ê°€ í˜„ì €íˆ ê°ì†Œí•œ ê²½ìš°</dd>
								<dd>- ê¸°ê°„ì˜ ê²½ê³¼ì— ì˜í•˜ì—¬ ì¬íŒë§¤ê°€ ê³¤ë€í•  ì •ë„ë¡œ ìƒí’ˆê°€ì¹˜ê°€ í˜„ì €íˆ ê°ì†Œí•œ ê²½ìš°</dd>
								<dd>- ì£¼ë¬¸í™•ì¸ í›„ ìƒí’ˆì œì‘ì— ë“¤ì–´ê°€ëŠ” ì£¼ë¬¸ì œì‘ ìƒí’ˆì¸ ê²½ìš°</dd>
								<dd>- ë³µì œê°€ ê°€ëŠ¥í•œ ìƒí’ˆ ë“±ì˜ í¬ì¥ì„ í›¼ì†í•œ ê²½ìš°</dd>
								<dd>- ë‹¨, ì¬í™” ë“±ì˜ ë‚´ìš©ì´ í‘œì‹œ (ì´ë¯¸ì§€ ë˜ëŠ” ê¸°ëŠ¥ì„ í¬í•¨) ë° ê´‘ê³  ë‚´ìš©ê³¼ ë‹¤ë¥´ê±°ë‚˜ ê³„ì•½ë‚´ìš©ê³¼ ë‹¤ë¥´ê²Œ ì´í–‰ëœ ë•Œì—ëŠ” ë‹¹í•´ ì¬í™” ë“±ì„ ê³µê¸‰ ë°›ì€ ë‚ ë¶€í„° 3ê°œì›” ì´ë‚´, ê·¸ ì‚¬ì‹¤ì„ ì•ˆ ë‚  ë˜ëŠ” ì•Œ ìˆ˜ ìˆì—ˆë˜ ë‚ ë¶€í„° 30ì¼ ì´ë‚´ì— ì²­ì•½ ì² íšŒ ë“±ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</dd>
							</dl>
						</div>

						<!--/* ë¦¬ë·° ì˜ì—­ */-->
						<div id="pdReview" class="pd_review tab_cont"></div>
					</div>
					<!-- //ìƒì„¸ì„¤ëª… -->

					<!-- ë¦¬ë·° íŒì—… -->
					<div class="popup_wrap" id="reviewPop" style="display: none;">
						<div class="popup_inner">
							<div class="popup_header">
								<p>ë¦¬ë·°ì“°ê¸°</p>
								<a href="#none" class="btn btn_close" onclick="popClose(this);">ë‹«ê¸°</a>
							</div>
							<div class="popup_contents">
								<form id="reviewForm" th:action="@{/reviews}" method="post" onsubmit="return registerReview(this)">
									<!--/* ìƒí’ˆ ì½”ë“œ */-->
									<input type="hidden" name="code" th:value="${goods.code}" />
									<!--/* íšŒì› ë‹‰ë„¤ì„ */-->
									<input sec:authorize="isAuthenticated()" type="hidden" name="nickname" th:value="${#authentication.principal.nickname}" />
									<!--/* ë³„ì  */-->
									<input type="hidden" name="grade" value="0" />

									<div class="review_info fl_wrap">
										<div class="img_box">
											<img th:src="@{/goods/images/} + ${#temporals.format( images[0].insertTime, 'yy-MM-dd' )} + '/' + ${images[0].storedName}" th:alt="${images[0].originalName}" />
										</div>
										<div class="txt_box">
											<p th:text="${goods.name}"></p>
											<strong th:text="|${#numbers.formatInteger( goods.price, 3, 'COMMA' )}ì›|"></strong>
										</div>
									</div>
									<div class="review_star">
										<span th:each="seq : ${#numbers.sequence(1, 5, 1)}" class="icon ic_star_lg" th:onclick="selectScore(this, [[ ${seq} ]])"></span>
									</div>
									<div class="review_cont">
										<textarea name="content" placeholder="ìƒí’ˆ ë¦¬ë·°ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”."></textarea>
										<!-- <div class="filebox">
											<input type="text" readonly="readonly" title="File Route" id="file_route">
											<label class="btn btn_black">
												ì‚¬ì§„ ì¶”ê°€
												<input type="file">
												<input type="file" onchange="javascript:document.getElementById('file_route').value=this.value">
											</label>
										</div>
										<ul class="add_photo">
											<li>
												<img th:src="@{/images/common/thumb.jpg}" alt="" />
												<button type="button" class="btn_delete">ì‚­ì œ</button>
											</li>
											<li>
												<img th:src="@{/images/common/thumb.jpg}" alt="" />
												<button type="button" class="btn_delete">ì‚­ì œ</button>
											</li>
										</ul> -->
									</div>
									<div class="btn_wrap">
										<input type="submit" value="ì‘ì„±ì™„ë£Œ" class="btn btn_orange" />
									</div>
								</form>
							</div>
						</div>
						<div class="popup_bg" onclick="popClose(this);"></div>
					</div>
					<!--/* //.popup_wrap */-->
				</div>
				<!--/* //.inner */-->
			</div>
			<!--/* //.clelar */-->
		</div>
		<!--/* //#container */-->
	</th:block>

	<th:block layout:fragment="script">
		<script th:inline="javascript">
		/* <![CDATA[ */

			$(function() {
				/*[- ì‚¬ì´ì¦ˆ lables active ì²˜ë¦¬ -]*/
				var lables = $(".radio_size").not(".soldout");
				lables.children("span").on("click", function() {
					lables.removeClass("active");
					$(this).parent().addClass("active");
					$(this).siblings("input").prop("checked", true);

					/*[- ì¬ê³  ìˆ˜ëŸ‰ ë³´ì—¬ì£¼ê¸° -]*/
					var actualQuantity = $(this).prev().data("actual-quantity");
					$(".option_quantity > h2").text("ìˆ˜ëŸ‰ - [ì¬ê³  : " + actualQuantity + "ê°œ]");

					/*[- ì„ íƒ ìˆ˜ëŸ‰ ì´ˆê¸°í™” -]*/
					document.getElementById("quantity").value = 1;
				});

				/*[- ë¦¬ë·° ë¶ˆëŸ¬ì˜¤ê¸° -]*/
				getReviews(1, 10, 5);
			});


			 /*[- /TODO => ë°”ë¡œ êµ¬ë§¤ ì²˜ë¦¬í•˜ê¸° -]*/
			function validationOfForm(form) {
				
				if ( isEmpty(form.size.value) ) {
					alert("ì‚¬ì´ì¦ˆë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.");
					return false;
				}
			}

			/**
			 * ìƒí’ˆ ìˆ˜ëŸ‰ ì¦ê°€
			 */
			function addQuantity(obj) {

				/*[- ì‚¬ì´ì¦ˆ ì„ íƒ ì—¬ë¶€ -]*/
				var isChecked = $(".radio_size").hasClass("active");
				if (isChecked == false) {
					alert("ì‚¬ì´ì¦ˆë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.");
					return false;
				}

				/*[- ì„ íƒí•œ ìˆ˜ëŸ‰ -]*/
				var quantity = parseInt(obj.value);
				/*[- ì„ íƒí•œ ì‚¬ì´ì¦ˆì˜ ì¬ê³  ìˆ˜ëŸ‰ -]*/
				var actualQuantity = parseInt($(".radio_size.active > input").data("actual-quantity"));
				/*[- ì„ íƒí•œ ìƒí’ˆì˜ ì‚¬ì´ì¦ˆ -]*/
				var size = $(".radio_size.active > input").val();

				if (quantity >= actualQuantity) {
					alert(size + " ì‚¬ì´ì¦ˆëŠ” " + actualQuantity + "ê°œê¹Œì§€ êµ¬ë§¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
					obj.value = actualQuantity;
					return false;
				}

				obj.value = quantity + 1;
			}

			/**
			 * ìƒí’ˆ ìˆ˜ëŸ‰ ê°ì†Œ
			 */
			function reduceQuantity(obj) {

				/*[- ì‚¬ì´ì¦ˆ ì„ íƒ ì—¬ë¶€ -]*/
				var isChecked = $(".radio_size").hasClass("active");
				if (isChecked == false) {
					alert("ì‚¬ì´ì¦ˆë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.");
					return false;
				}

				/*[- ì„ íƒí•œ ìˆ˜ëŸ‰ -]*/
				var quantity = parseInt(obj.value);
				if (quantity <= 1) {
					alert("ìˆ˜ëŸ‰ì€ ìµœì†Œ 1ê°œê¹Œì§€ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
					return false;
				}

				obj.value = quantity - 1;
			}

			/**
			 * ìˆ˜ëŸ‰ focusout
			 */
			function checkQuantity(obj) {

				/*[- ì„ íƒí•œ ì‚¬ì´ì¦ˆì˜ ì¬ê³  ìˆ˜ëŸ‰ -]*/
				var actualQuantity = parseInt($(".radio_size.active > input").data("actual-quantity"));

				if (obj.value < 1 || obj.value >= actualQuantity) {
					alert("ìˆ˜ëŸ‰ì€ ìµœì†Œ 1ê°œì—ì„œ ìµœëŒ€ " + actualQuantity + "ê°œê¹Œì§€ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
					obj.value = 1;
					return false;
				}
			}

			/**
			 * ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°
			 */
			function addToCart(code) {

				if (/*[[ ${isAnonymousUser} ]]*/) {
					var message = "ë¡œê·¸ì¸ì´ í•„ìš”í•œ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í• ê¹Œìš”?";
					if (confirm(message) == true) {
						location.href = /*[[ @{/login} ]]*/;
					}
					return false;
				}

				/*[- ìƒí’ˆ ì‚¬ì´ì¦ˆ -]*/
				var size = $(".radio_size.active").children("span").text();
				/*[- ìƒí’ˆ ìˆ˜ëŸ‰ -]*/
				var quantity = $("#quantity").val();

				if (isEmpty(size)) {
					alert("ì‚¬ì´ì¦ˆë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.");
					return false;

				} else if (quantity < 1 || quantity > 3) {
					alert("ìˆ˜ëŸ‰ì€ ìµœì†Œ 1ê°œì—ì„œ ìµœëŒ€ 3ê°œê¹Œì§€ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
					quantity = 0;
					return false;
				}

				/*[- ì„œë²„ë¡œ ì „ì†¡í•  ë°ì´í„° -]*/
				var params = {
					"code" : code,
					"size" : size,
					"quantity" : quantity
				};

				$.ajax({
					url : /*[[ @{/cart} ]]*/,
					type : "post",
					headers : {
						"Content-Type" : "application/json",
						"X-HTTP-Method-Override" : "post",
						"X-CSRF-TOKEN" : getToken(),
					},
					dataType : "json",
					data : JSON.stringify(params),
					async : false,
					success : function(response) {
						/*[- ë¡œê·¸ì¸ì´ ë˜ì§€ ì•Šì•˜ê±°ë‚˜, ì´ë¯¸ ì¥ë°”êµ¬ë‹ˆì— ì¡´ì¬í•˜ëŠ” ìƒí’ˆì˜ ê²½ìš° -]*/
						if (isEmpty(response.type) == false && response.result == false) {
							/*[- type (1 : ë¡œê·¸ì¸ì´ ë˜ì§€ ì•Šì€ ìƒíƒœ | 2 : ì´ë¯¸ ì¥ë°”êµ¬ë‹ˆì— ìƒí’ˆì´ ì¡´ì¬í•˜ëŠ” ìƒíƒœ) -]*/
							var redirectUri = response.type == 1 ? [[ @{/login} ]] : [[ @{/cart} ]];
							if (confirm(response.message) == false) {
								return false;
							}
							location.href = redirectUri;

						/*[- ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€ ì‹¤íŒ¨ -]*/
						} else if (isEmpty(response.type) && response.result == false) {
							alert(response.message);

						/*[- ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€ ì„±ê³µ -]*/
						} else {
							if (confirm(response.message) == false) {
								return false;
							}
							location.href = /*[[ @{/cart} ]]*/;
						}
					},
					error : function(request, status, error) {
						alert("ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤. ìƒˆë¡œê³ ì¹¨ í›„ì— ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.");
					}
				});

				return false;
			}


			/**
			 * ë°”ë¡œ êµ¬ë§¤
			 */
			function goPurchase(code) {

				var size = $(".radio_size.active").children("input"); /*[- activeê°€ ì ìš©ëœ label ìš”ì†Œì˜ ìì‹ input -]*/
				var quantity = document.getElementById("quantity"); /*[- ìˆ˜ëŸ‰ -]*/
				var actualQuantity = size.data("actual-quantity"); /*[- ì‹¤ì œ ìˆ˜ëŸ‰ -]*/

				if ( isEmpty(size.val()) ) {
					alert("ì‚¬ì´ì¦ˆë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.");
					return false;

				} else if (quantity.value > actualQuantity) {
					alert("ì„ íƒí•˜ì‹  ì‚¬ì´ì¦ˆëŠ” " + actualQuantity + "ê°œì˜ ì¬ê³ ê°€ ì¡´ì¬í•©ë‹ˆë‹¤.");
					return false;
				}

				var params = "?codes=" + code + "&size=" + size.val() + "&quantity=" + document.getElementById("quantity").value;
				location.href = [[ @{/goods/checkout} ]] + params;
			}


			/**
			 * ë¦¬ë·° ë¶ˆëŸ¬ì˜¤ê¸°
			 */
			function getReviews(pageNo, recordCountPerPage, pageSize) {

				var params = new Object();
				params["code"] = /*[[ ${goods.code} ]]*/;
				params["currentPageNo"] = pageNo;
				params["recordCountPerPage"] = recordCountPerPage;
				params["pageSize"] = pageSize;

				$.ajax({
					url : /*[[ @{/reviews} ]]*/,
					type : "get",
					headers: {
						"Content-Type" : "application/json",
						"X-HTTP-Method-Override" : "get"
					},
					dataType : "json",
					data : params,
					async : false,
					success : function(response) {
						var html = "";

						/*[- ë¦¬ë·°ê°€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ -]*/
						if (isEmpty(response) == true) {
			 				html += '<p class="fl_wrap">';
				 				html += '<strong class="orange fl_left">0</strong>ê°œì˜ ë¦¬ë·°ê°€ ìˆìŠµë‹ˆë‹¤.';
				 				/*[- ë¡œê·¸ì¸í•œ íšŒì›ì—ê²Œë§Œ ë¦¬ë·° ì“°ê¸° ë²„íŠ¼ì´ ë³´ì´ë„ë¡ ì²˜ë¦¬ -]*/
				 				if (/*[[ ${isAnonymousUser} == false ]]*/) {
					 				html += '<a href="javascript:void(0)" class="btn btn_black fl_right" onclick="popOpen(\'#reviewPop\');">ë¦¬ë·° ì“°ê¸°</a>';
				 				}
							html += '</p>';

						} else {
			 				html += '<p class="fl_wrap">';
				 				html += '<strong class="orange fl_left">'+ makeCommas(response.params.totalRecordCount) +'</strong>ê°œì˜ ë¦¬ë·°ê°€ ìˆìŠµë‹ˆë‹¤.';
				 				/*[- ë¡œê·¸ì¸í•œ íšŒì›ì—ê²Œë§Œ ë¦¬ë·° ì“°ê¸° ë²„íŠ¼ì´ ë³´ì´ë„ë¡ ì²˜ë¦¬ -]*/
				 				if (response.isAnonymousUser == false) {
					 				html += '<a href="javascript:void(0)" class="btn btn_black fl_right" onclick="popOpen(\'#reviewPop\');">ë¦¬ë·° ì“°ê¸°</a>';
				 				}
							html += '</p>';
				 			html += '<ul class="clear">';
	
							response.reviews.forEach(function(obj, idx) {
								var date = obj.insertTime.date;
					 				html += '<li>';
					 					html += '<p class="re_title">';
						 					html += '<span class="re_name">'+ obj.nickname +'</span>';
						 					html += '<span class="re_date">'+ date.year + "." + date.month + "." + date.day +'</span>';
						 					html += '<span class="re_star icon ic_star ic_star'+ obj.grade +'"></span>';
					 					html += '</p>';
					 					html += '<div class="re_cont">';
					 						html += '<p>'+ obj.content +'</p>';
					 					html += '</div>';
					 				html += '</li>';
							});
							/*[- end of forEach -]*/
	
				 			html += '</ul>';
	
				 			/*[- í˜ì´ì§• -]*/
				 			if (isEmpty(response.params) == false) {
				 				var paginationInfo = response.params.paginationInfo; /*[- ê³„ì‚°ëœ í˜ì´ì§• ì •ë³´ -]*/
	
					 			html += '<div class="paging">';
					 				if (paginationInfo.previousPage == true) {
					 					html += '<a href="javascript: void(0)" class="btn_arrow btn_first" onclick="getReviews('+ 1 +', '+ response.params.recordCountPerPage +', '+ response.params.pageSize +')">ì²˜ìŒ</a>';
										html += '<a href="javascript: void(0)" class="btn_arrow btn_previous" onclick="getReviews('+ (parseInt(paginationInfo.firstPage) - 1) +', '+ response.params.recordCountPerPage +', '+ response.params.pageSize +')">ì´ì „</a>';
					 				}
					 				for (var i = paginationInfo.firstPage; i <= paginationInfo.lastPage; i++) {
					 					/*[- í˜„ì¬ í˜ì´ì§€ì™€ í˜ì´ì§€ ë²ˆí˜¸ê°€ ë™ì¼í•œ ê²½ìš° active ì²˜ë¦¬ -]*/
					 					if (i == response.params.currentPageNo) {
					 						html += '<a href="javascript: void(0)" class="active" onclick="getReviews('+ i +', '+ response.params.recordCountPerPage +', '+ response.params.pageSize +')">'+ i +'</a>';
					 					} else {
											html += '<a href="javascript: void(0)" onclick="getReviews('+ i +', '+ response.params.recordCountPerPage +', '+ response.params.pageSize +')">'+ i +'</a>';
					 					}
					 				}
									if (paginationInfo.nextPage == true) {
										html += '<a href="javascript: void(0)" class="btn_arrow btn_next" onclick="getReviews('+ (parseInt(paginationInfo.lastPage) + 1) +', '+ response.params.recordCountPerPage +', '+ response.params.pageSize +')">ë‹¤ìŒ</a>';
										html += '<a href="javascript: void(0)" class="btn_arrow btn_last" onclick="getReviews('+ paginationInfo.totalPageCount +', '+ response.params.recordCountPerPage +', '+ response.params.pageSize +')">ë§ˆì§€ë§‰</a>';
					 				}
								html += '</div>';
				 			}
				 			/*[- ajax ìƒˆë¡œê³ ì¹¨ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ pushState -]*/
				 			if (isPushStateAvailable() == true) {
				 				/*[- ì˜¤ë¸Œì íŠ¸ë¥¼ ì¿¼ë¦¬ ìŠ¤íŠ¸ë§ í˜•íƒœë¡œ replace => new URLSearchParams(params).toString()ê³¼ ê°™ì€ ë°©ë²•ë„ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ -]*/
								var queryString = Object.keys(params).map(key => key + '=' + params[key]).join('&');
								history.pushState(null, null, "/goods/details?" + queryString); /*[- state, title, uri -]*/
							}
						}
						/*[- end of else -]*/

			 			$("#pdReview").html(html); /*[- html í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ë•Œ, ìƒìœ„ ìš”ì†Œë¥¼ ì…€ë ‰í„°ë¡œ ì‚¬ìš©í•˜ê¸° -]*/
					},
					error : function(request, status, error) {
						alert("ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤. ìƒˆë¡œê³ ì¹¨ í›„ì— ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.");
					}
				});
				/*[- end of ajax -]*/

				return false;
			}

			/**
			 * ë¦¬ë·° ë³„ì  ì„ íƒ
			 */
			function selectScore(obj, seq) {

				var star = $(obj);
				star.prevAll().addClass("active"); /*[- ì„ íƒí•œ ë³„ ì´ì „ì˜ ëª¨ë“  ë³„ì— active ì¶”ê°€ -]*/
				star.addClass("active"); /*[- ì„ íƒí•œ ë³„ì— active ì¶”ê°€ -]*/

				/*[- ì„ íƒí•œ ë³„ë³´ë‹¤ ì ìˆ˜ê°€ ë†’ì€ ê²½ìš° -]*/
				if (star.nextAll().hasClass("active") == true) {
					star.nextAll().removeClass("active");
				}

				/*[- ë³„ì  hidden value ì²˜ë¦¬ -]*/
				var form = document.getElementById("reviewForm");
				form.grade.value = seq;
			}

			/**
			 * ë¦¬ë·° ë“±ë¡
			 */
			function registerReview(form) {

				if (form.grade.value < 1) {
					alert("ë³„ì ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.");
					return false;
				}

				var result = (
					   isValid(form.code, "ìƒí’ˆ ì½”ë“œ", null, null)
					&& isValid(form.nickname, "ë‹‰ë„¤ì„", null, null)
					&& isValid(form.content, "ë‚´ìš©", null, null)
				);

				if (result == false) {
					return false;
				}

				/*[- ajax ìš”ì²­ì— í•„ìš”í•œ key, value í˜•íƒœì˜ ì˜¤ë¸Œì íŠ¸ ìƒì„± -]*/
				var params = makeAjaxRequestData(form);

				$.ajax({
					url : /*[[ @{/reviews} ]]*/,
					type : form.method,
					headers : {
						"Content-Type" : "application/json",
						"X-HTTP-Method-Override" : form.method,
						"X-CSRF-TOKEN" : getToken()
					},
					dataType : "json",
					data : JSON.stringify(params),
					async : false,
					success : function(response) {
						if (isEmpty(response.message) == false) {
							alert(response.message);
							popClose(".btn_close");
							return false;
						}
						alert("ë¦¬ë·°ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.");
						popClose(".btn_close"); /*[- ë¦¬ë·° ë“±ë¡ íŒì—… ë‹«ê¸° -]*/
						getReviews(1, 10, 5); /*[- ë¦¬ë·° ë¶ˆëŸ¬ì˜¤ê¸° -]*/
					},
					error : function(request, status, error) {
						alert("ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ìƒˆë¡œê³ ì¹¨ í›„ì— ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.");
					}
				});
				/*[- end of ajax -]*/

				return false;
			}
			/*[- end of function -]*/


			/**
			 * ì¢‹ì•„ìš”
			 */
			function favorite(obj) {

				if (/*[[ ${isAnonymousUser} ]]*/) {
					var message = "ë¡œê·¸ì¸ì´ í•„ìš”í•œ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í• ê¹Œìš”?";
					if (confirm(message) == true) {
						location.href = /*[[ @{/login} ]]*/;
					}
					return false;
				}

				$.ajax({
					url : /*[[ @{/favorite} ]]*/,
					type : "post",
					headers : {
						"Content-Type" : "application/json",
						"X-HTTP-Method-Override" : "post",
						"X-CSRF-TOKEN" : getToken()
					},
					dataType : "json",
					data : JSON.stringify({ "code" : /*[[ ${goods.code} ]]*/ }),
					async : false,
					success : function(response) {
						if (isEmpty(response.message) == false) {
							alert(response.message);
							return false;
						}
						addActive(obj);
						$(obj).text("ğŸ’— " + response.totalCount);
						$(obj).attr("onclick", "changeFavoriteStatus(this)");

					},
					error : function(request, status, error) {
						alert("ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ìƒˆë¡œê³ ì¹¨ í›„ì— ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.");
					}
				});
				/*[- end of ajax -]*/

				return false;
			}
			/*[- end of function -]*/


			/**
			 * ì¢‹ì•„ìš” ìƒíƒœ ë³€ê²½
			 */
			function changeFavoriteStatus(obj) {

				$.ajax({
					url : /*[[ @{/favorite/} + ${goods.code} ]]*/,
					type : "patch",
					headers : {
						"Content-Type" : "application/json",
						"X-HTTP-Method-Override" : "patch",
						"X-CSRF-TOKEN" : getToken()
					},
					dataType : "json",
					async : false,
					success : function(response) {
						if (isEmpty(response.message) == false) {
							alert(response.message);
							return false;
						}
						addActive(obj);
						$(obj).text("ğŸ’— " + response.totalCount);
					},
					error : function(request, status, error) {
						alert("ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ìƒˆë¡œê³ ì¹¨ í›„ì— ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.");
					}
				});
				/*[- end of ajax -]*/

				return false;
			}
			/*[- end of function -]*/


			/* ]]> */
	</script>
	</th:block>

</html>